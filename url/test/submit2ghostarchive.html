
<script>
async function redirectToGhostArchiveWithRandomUrl() {
  try {
    // Use the RAW GitHub URL (not the /blob/... one)
    const jsonUrl = "https://raw.githubusercontent.com/backlink-generator-tool/url-dump-json/main/url/custom-urls/submit2ghostarchive.json";

    const res = await fetch(jsonUrl);
    if (!res.ok) throw new Error("Failed to fetch JSON: " + res.status);
    const data = await res.json();

    // Find an array of URLs inside the JSON (handles top-level array or common wrappers)
    let urlsArray = null;
    if (Array.isArray(data)) {
      urlsArray = data;
    } else if (Array.isArray(data.urls)) {
      urlsArray = data.urls;
    } else {
      // look for first array value
      for (const v of Object.values(data)) {
        if (Array.isArray(v)) { urlsArray = v; break; }
      }
    }

    if (!urlsArray || urlsArray.length === 0) {
      alert("No URL list found in JSON.");
      return;
    }

    // pick random URL
    const randomUrl = urlsArray[Math.floor(Math.random() * urlsArray.length)];
    console.log("Redirecting to archive:", randomUrl);

    // create form and submit (this causes the browser to navigate via POST)
    const form = document.createElement("form");
    form.method = "POST";
    form.action = "https://ghostarchive.org/archive2";
    form.referrerPolicy = "no-referrer";
    form.style.display = "none";       // hide it
    form.setAttribute("accept-charset", "utf-8");

    const input = document.createElement("input");
    input.type = "text";
    input.name = "archive";            // required field name per your form
    input.value = randomUrl;
    input.required = true;

    form.appendChild(input);
    document.body.appendChild(form);
    form.submit();

    // (optionally) remove the form afterwards - not necessary since navigation will occur
    // setTimeout(() => form.remove(), 1000);
  } catch (err) {
    console.error(err);
    alert("Error: " + err.message);
  }
}

// run it
redirectToGhostArchiveWithRandomUrl();
</script>


